#!/bin/sh # FreeBSD GPU Power Threading — 28‑Line Wrapper COMP="/usr/local/bin/os2_compiler" LIB="/usr/local/lib"; export LD_LIBRARY_PATH="$LIB:$LD_LIBRARY_PATH" neo() { echo "User: $(whoami) OS: FreeBSD GPU: $(kldstat|grep -q amdgpu&&echo OK||echo NO)"; } gpu_check() { kldstat|grep -q amdgpu||{ echo "KRN0001: no amdgpu"; return 1; }; } alloc() { T=$1; [ -z "$T" ]&&T=4096; [ "$T" -gt 16384 ]&&T=16384; GPU_T=$T; echo "Threads=$GPU_T"; } exec_gpu() { [ -z "$GPU_T" ]&&{ echo "KRN0004: no threads"; return 1; }; "$COMP" --mode "$1" --threads "$GPU_T"; } power() { neo; gpu_check||return 1; alloc "$2"; exec_gpu "$1"; } wrap_nm() { echo "[Naughty‑Manhattan‑Shell] $1 → GPU:$2 Threads:$GPU_T"; } case "$1" in neo) neo ;; check) gpu_check ;; alloc) alloc "$2" ;; exec) exec_gpu "$2" ;; power) power "$2" "$3" ;; nm) wrap_nm "$2" "$3"; power "$3" "$4" ;; *) echo "Usage: $0 {neo|check|alloc|exec|power|nm}" ;; esac